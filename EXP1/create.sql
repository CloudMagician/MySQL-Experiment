CREATE DATABASE BANK;
USE BANK;

CREATE TABLE BRANCH
(
    BRANCH_NAME VARCHAR(20) NOT NULL PRIMARY KEY,
    BRANCH_CITY VARCHAR(20) NOT NULL,
    ASSETS NUMERIC(7,0) NOT NULL,
    CHECK (ASSETS >= 0)
);

CREATE TABLE ACCOUNT
(
    ACCOUNT_NUMBER VARCHAR(10) NOT NULL PRIMARY KEY,
    BRANCH_NAME VARCHAR(20) NOT NULL,
    BALANCE NUMERIC(4,0),
    FOREIGN KEY (BRANCH_NAME) REFERENCES BRANCH(BRANCH_NAME) ON DELETE CASCADE ON UPDATE CASCADE,
    CHECK (BALANCE >= 0)
);

CREATE TABLE LOAN
(
    LOAN_NUMBER VARCHAR(10) NOT NULL PRIMARY KEY,
    BRANCH_NAME VARCHAR(20) NOT NULL,
    AMOUNT NUMERIC(5,0),
    FOREIGN KEY (BRANCH_NAME) REFERENCES BRANCH(BRANCH_NAME) ON DELETE CASCADE ON UPDATE CASCADE,
    CHECK (AMOUNT >= 0 )
);

CREATE TABLE CUSTOMER
(
    CUSTOMER_NAME VARCHAR(20) NOT NULL PRIMARY KEY,
    CUSTOMER_STREET VARCHAR(20) NOT NULL,
    CUSTOMER_CITY VARCHAR(20) NOT NULL
);

CREATE TABLE DEPOSITOR
(
    CUSTOMER_NAME VARCHAR(20) NOT NULL,
    ACCOUNT_NUMBER VARCHAR(10) NOT NULL,
    FOREIGN KEY (CUSTOMER_NAME) REFERENCES CUSTOMER(CUSTOMER_NAME) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (ACCOUNT_NUMBER) REFERENCES ACCOUNT(ACCOUNT_NUMBER) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE BORROWER
(
    CUSTOMER_NAME VARCHAR(20) NOT NULL,
    LOAN_NUMBER VARCHAR(10) NOT NULL,
    FOREIGN KEY (CUSTOMER_NAME) REFERENCES CUSTOMER(CUSTOMER_NAME) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (LOAN_NUMBER) REFERENCES LOAN(LOAN_NUMBER) ON DELETE CASCADE ON UPDATE CASCADE
);